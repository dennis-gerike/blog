<!DOCTYPE html>
<html lang='en'><head>
  <title>Is the test pyramid compatible with BDD? - // - Dennis Gerike</title>
  <link rel='canonical' href='https://dennis-gerike.de/articles/is-the-test-pyramid-compatible-with-bdd/2024/02/' />
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <meta name='description' content='When working according to the test pyramid, is it possible to integrate BDD somehow? Or are both concepts too different?' />
  <meta name='theme-color' content='#FD3519' />
  

  <meta name="generator" content="Hugo 0.122.0">

  





<link rel="stylesheet" href="https://dennis-gerike.de/sass/style.min.dce7cd3d44a877c50fd7da73096b4827b6320670ee548d2edf6b8656ba8fdcaf.css" integrity="sha256-3OfNPUSod8UP19pzCWtIJ7YyBnDuVI0u32uGVrqP3K8=" media="screen">
<link rel="stylesheet" href="https://dennis-gerike.de/syntax.min.css" integrity="" media="screen">

  <meta property="og:title" content="Is the test pyramid compatible with BDD?" />
<meta property="og:description" content="When working according to the test pyramid, is it possible to integrate BDD somehow? Or are both concepts too different?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dennis-gerike.de/articles/is-the-test-pyramid-compatible-with-bdd/2024/02/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-02-21T00:00:00+00:00" />


  <meta itemprop="name" content="Is the test pyramid compatible with BDD?">
<meta itemprop="description" content="When working according to the test pyramid, is it possible to integrate BDD somehow? Or are both concepts too different?"><meta itemprop="datePublished" content="2024-02-21T00:00:00+00:00" />
<meta itemprop="dateModified" content="2024-02-21T00:00:00+00:00" />
<meta itemprop="wordCount" content="761">
<meta itemprop="keywords" content="Test Pyramid,BDD,Unit Tests,Integration Tests,e2e Tests," />
</head>
<body>

  <header style="background-image:linear-gradient(
      rgba(0,0,0,0.4),rgba(0,0,0,0.4)
    ),url(&#39;https://dennis-gerike.de/images/bg2.jpg&#39;)">
  <div class="intro">
    <div class="logo-container">
      <a href="https://dennis-gerike.de/">
        <img src='https://dennis-gerike.de/images/dennis-gerike.jpg' alt="Dennis Gerike" class="rounded-logo">
      </a>
    </div>
    <h2>Dennis Gerike</h2>
    <h3>Engineering test automation solutions for the web - with Cypress, BDD and Jira/Xray</h3>
    <div class="menu">
      

        <p>
            <a href="/articles/">
                Articles
            </a>
        </p>

        <p>
            <a href="/about-me/">
                About me
            </a>
        </p>

        <p>
            <a href="https://github.com/dennis-gerike/flickr-photos-to-postcard-converter">
                Demo Project
            </a>
        </p>

        <p>
            <a href="/contact/">
                Contact
            </a>
        </p>

    </div>
  </div>

  <div class="socials">
      
  
    <a href="https://github.com/dgerike" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.linkedin.com/in/dennis-gerike/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M106.786 0H8.189C3.67 0 0 3.722 0 8.291v98.418C0 111.278 3.67 115 8.189 115h98.597c4.518 0 8.214-3.722 8.214-8.291V8.29C115 3.722 111.304 0 106.786 0zm-72.03 98.571H17.713V43.69h17.07V98.57h-.025zm-8.522-62.377c-5.467 0-9.882-4.44-9.882-9.883 0-5.442 4.415-9.882 9.882-9.882 5.442 0 9.883 4.44 9.883 9.882a9.87 9.87 0 0 1-9.883 9.883zm72.414 62.377H81.604V71.875c0-6.366-.129-14.555-8.856-14.555-8.882 0-10.242 6.931-10.242 14.093V98.57H45.46V43.69h16.352v7.495h.23c2.285-4.312 7.855-8.856 16.147-8.856 17.25 0 20.458 11.372 20.458 26.158V98.57z"/>
  
  </svg>
</div>
</a>
  

  </div>
</header>

<div class="mobile-header">
  <p> // - Dennis Gerike </p>
  <div class="hamburger">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
</div>

<div class="overlay-menu">
  <header>
    <div class="intro">
      <div class="logo-container">
        <a href="https://dennis-gerike.de/">
          <img src='https://dennis-gerike.de/images/dennis-gerike.jpg' alt="Dennis Gerike" class="rounded-logo">
        </a>
      </div>
      <h2>Dennis Gerike</h2>
      <h3>Engineering test automation solutions for the web - with Cypress, BDD and Jira/Xray</h3>
      <div class="menu">
        

        <p>
            <a href="/articles/">
                Articles
            </a>
        </p>

        <p>
            <a href="/about-me/">
                About me
            </a>
        </p>

        <p>
            <a href="https://github.com/dennis-gerike/flickr-photos-to-postcard-converter">
                Demo Project
            </a>
        </p>

        <p>
            <a href="/contact/">
                Contact
            </a>
        </p>

      </div>
    </div>

    <div class="socials">
        
  
    <a href="https://github.com/dgerike" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.linkedin.com/in/dennis-gerike/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M106.786 0H8.189C3.67 0 0 3.722 0 8.291v98.418C0 111.278 3.67 115 8.189 115h98.597c4.518 0 8.214-3.722 8.214-8.291V8.29C115 3.722 111.304 0 106.786 0zm-72.03 98.571H17.713V43.69h17.07V98.57h-.025zm-8.522-62.377c-5.467 0-9.882-4.44-9.882-9.883 0-5.442 4.415-9.882 9.882-9.882 5.442 0 9.883 4.44 9.883 9.882a9.87 9.87 0 0 1-9.883 9.883zm72.414 62.377H81.604V71.875c0-6.366-.129-14.555-8.856-14.555-8.882 0-10.242 6.931-10.242 14.093V98.57H45.46V43.69h16.352v7.495h.23c2.285-4.312 7.855-8.856 16.147-8.856 17.25 0 20.458 11.372 20.458 26.158V98.57z"/>
  
  </svg>
</div>
</a>
  

    </div>
  </header>
</div>

  <div class="content-wrapper">
    
    <main id="content" class="posts">


  <h1>Is the test pyramid compatible with BDD?</h1>
  <p>The test pyramid is a popular metaphor to describe how the testing efforts should be distributed in a software development project.
It recommends having many unit tests, some integration tests and a few end-2-end tests.</p>
<p>One of the motivations behind BDD is to create a living documentation, usually described with Gherkin scenarios and implemented with Cucumber tests.
Those Cucumber tests are often seen as the tip of the testing pyramid.
But is this a valid assumption?</p>
<p><img src="bdd-vs-testing-pyramid.png" alt="Can you combine BDD with the test pyramid?"></p>
<h2 id="test-pyramid-in-a-nutshell">Test pyramid in a nutshell</h2>
<p>Over the years many different variants of the test pyramid have been discussed (e.g. the ice cream cone, cupcake or hour glass).
But, for this discussion we only need the classic pyramid.
It breaks down the automated tests in three layers.</p>
<h3 id="unit-tests">Unit tests</h3>
<p>Unit tests build the foundation and should be - by numbers - the largest test suite.
They test small chunks of code, are isolated from other dependencies, and are therefore extremely fast to execute.</p>
<p>Example: Tests that verify that the login function works.</p>
<h3 id="integration-tests">Integration tests</h3>
<p>Integration tests verify that the units are working together, not just work in isolation.
To properly test that the units can be integrated into the system there are fewer options to create mocks or stubs.
Therefore, those tests are slower to run und the test suite needs to be smaller.</p>
<p>Example: Tests that verify that using the login function triggers the creation of a session.</p>
<h3 id="end-2-end-tests">End-2-End tests</h3>
<p>The tip of the test pyramid is known under many names: acceptance tests, UAT, end-2-end tests, UI tests, GUI tests, etc.
What they all have in common is that they test a path through the system from the user&rsquo;s perspective.
Those tests focus on the behavior of the system (the &ldquo;what&rdquo;), while unit and integration tests focus on the implementation details (the &ldquo;how&rdquo;).
In general, e2e tests are much slower because they require a deployed and running instance of the application.</p>
<p>Example: Tests that verify that the user is redirected to the dashboard after a successful login.</p>
<h2 id="bdd-in-a-nutshell">BDD in a nutshell</h2>
<p>In BDD (behavior-driven development) each feature goes through three phases: Discovery, formulation and automation.
The job of the discovery phase is to create a shared understanding between everyone involved.
In the formulation phase a specification document is produced that is human- and machine-readable.
And the result of the automation phase should be a living documentation.</p>
<p>This is explained in more detail in the article <a href="/articles/gherkin-vs-cucumber-vs-bdd-what-is-the-difference/2024/01/">Gherkin vs Cucumber vs BDD - What is the difference</a>.</p>
<h2 id="combining-bdd-and-the-test-pyramid">Combining BDD and the test pyramid</h2>
<p>At first glance there doesn&rsquo;t seem to be much overlap between BDD and the test pyramid.
But, at the end of the day, an automated BDD test is nothing more than a plain old e2e test.
It tests one aspect of the application from the end user&rsquo;s perspective.
Putting the BDD tests on top of the pyramid seems to be valid.
Also - by definition - the formulated BDD specification is supposed to directly guide the developer with writing their TDD tests.
So, we have a strong connection here.</p>
<p>But, nonetheless, the focus of BDD is not to produce tests.
The primary goal is to specify and document the system behavior.
The automated tests are a bonus that we get for creating the living documentation.</p>
<p>The goal of the test pyramid is to remind the developers to invest heavily in unit tests, not to forget about the upper layers, and being careful when adding (too many) e2e tests.
The important part is that the pyramid belongs to the developers.
They decide which tools they use and how much they test on each layer.</p>
<p>The BDD tests on the other hand belong to the business.
Business decides how complex and detailed the Gherkin scenarios (and therefore the Cucumber tests) should become.
When the BDD tests are now part of the test pyramid, then suddenly business dictates what and how much the devs have to test.
Then the construct becomes a shared pyramid and cannot fulfil its original intention anymore.</p>
<h2 id="conclusion">Conclusion</h2>
<p>BDD as a concept primarily helps the business, the test pyramid metaphor primarily helps the developers.
Both have their right to exist and both can co-exist.
But mixing them does not work well.
Developers can and should have e2e tests, but they should decide about the amount, the detail and the technology themselves.
Therefore, business has to have their own test suite for the BDD tests.
They may influence what happens in the test pyramid (remember: BDD should drive the TDD tests), but they should not be able to dictate it.</p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://www.smashingmagazine.com/2023/09/long-live-test-pyramid/#all-hail-the-mighty-test-pyramid">https://www.smashingmagazine.com/2023/09/long-live-test-pyramid/#all-hail-the-mighty-test-pyramid</a></li>
<li><a href="https://cucumber.io/blog/bdd/bdd-approval-testing-and-visualtest/">https://cucumber.io/blog/bdd/bdd-approval-testing-and-visualtest/</a></li>
<li><a href="https://khushiy.com/2019/02/07/test-pyramid-antipatterns/">https://khushiy.com/2019/02/07/test-pyramid-antipatterns/</a></li>
</ul>


    </main>
  </div>
  <footer>
    <div class="footer-wrapper">
      Powered by <a href="https://gohugo.io/" target="_blank" rel="external">Hugo</a>,
      using the <a href="https://github.com/bjacquemet/personal-web" target='_blank' rel="external">Personal Web</a> theme.
      Icons come from the <a href="https://fontawesome.com/license" target="_blank" rel="external">Font Awesome</a> library.
      Background <a href="https://flickr.com/photos/lawrenceyeah/9659161869" target='_blank' rel="external">image</a> by Lawrence Wang /
      <a href="https://creativecommons.org/licenses/by/2.0/" target='_blank' rel="external">CC BY 2.0</a>.
    </div>
  </footer>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:500,600|Raleway:400,400i,600" rel="stylesheet">
  <script type="text/javascript">
    document.querySelector('.mobile-header').addEventListener('click', function () {
      var om = document.querySelector(".overlay-menu");
      if (document.querySelector('.hamburger').classList.contains("cross")) {
        document.querySelector('.hamburger').classList.remove("cross");
        om.style.display = "none";
        om.style.width = "0%";
        om.style.height = "0%";
      }
      else {
        document.querySelector('.hamburger').classList.add("cross");
        om.style.width = "100%";
        om.style.height = "100vh";
        om.style.display = "block";
      }
    });
  </script>
</body>
</html>
