<!DOCTYPE html>
<html lang='en'><head>
  <title>How to measure the test coverage of user stories in Jira? - // - Dennis Gerike</title>
  <link rel='canonical' href='https://dennis-gerike.de/articles/how-to-measure-the-test-coverage-of-user-stories-in-jira/2024/04/' />
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <meta name='description' content='To know the level of test coverage can significantly help the stakeholder when deciding whether it is safe to go live or not. But how can this information be extracted and visualized in Jira?' />
  <meta name='theme-color' content='#387a02' />
  

  <meta name="generator" content="Hugo 0.125.2">

  





<link rel="stylesheet" href="https://dennis-gerike.de/sass/style.min.02c079a54b38dff17c5b1920a932ed4de2a1845d9eff3af418b09816d5fdf6d3.css" integrity="sha256-AsB5pUs43/F8WxkgqTLtTeKhhF2e/zr0GLCYFtX99tM=" media="screen">
<link rel="stylesheet" href="https://dennis-gerike.de/syntax.min.css" integrity="" media="screen">

  <meta property="og:url" content="https://dennis-gerike.de/articles/how-to-measure-the-test-coverage-of-user-stories-in-jira/2024/04/">
  <meta property="og:site_name" content="// - Dennis Gerike">
  <meta property="og:title" content="How to measure the test coverage of user stories in Jira?">
  <meta property="og:description" content="To know the level of test coverage can significantly help the stakeholder when deciding whether it is safe to go live or not. But how can this information be extracted and visualized in Jira?">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-04-15T00:00:00+00:00">
    <meta property="article:tag" content="Jira">
    <meta property="article:tag" content="Jira Dashboard">
    <meta property="article:tag" content="User Story">
    <meta property="article:tag" content="Coverage">
    <meta property="article:tag" content="ScriptRunner">
    <meta property="article:tag" content="Xray">
    <meta property="og:image" content="https://dennis-gerike.de/articles/how-to-measure-the-test-coverage-of-user-stories-in-jira/2024/04/test-vs-code-vs-feature.png">

  
  <meta itemprop="name" content="How to measure the test coverage of user stories in Jira?">
  <meta itemprop="description" content="To know the level of test coverage can significantly help the stakeholder when deciding whether it is safe to go live or not. But how can this information be extracted and visualized in Jira?">
  <meta itemprop="datePublished" content="2024-04-15T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-04-15T00:00:00+00:00">
  <meta itemprop="wordCount" content="2501">
  <meta itemprop="image" content="https://dennis-gerike.de/articles/how-to-measure-the-test-coverage-of-user-stories-in-jira/2024/04/test-vs-code-vs-feature.png">
  <meta itemprop="keywords" content="Jira,Jira Dashboard,User Story,Coverage,ScriptRunner,Xray">
</head>
<body>

  <header style="background-image:linear-gradient(
      rgba(0,0,0,0.4),rgba(0,0,0,0.4)
    ),url(&#39;https://dennis-gerike.de/images/bg2.jpg&#39;)">
  <div class="intro">
    <div class="logo-container">
      <a href="https://dennis-gerike.de/">
        <img src='https://dennis-gerike.de/images/dennis-gerike.jpg' alt="Dennis Gerike" class="rounded-logo">
      </a>
    </div>
    <h2>Dennis Gerike</h2>
    <h3>Engineering test automation solutions for the web - with Cypress, BDD and Jira/Xray</h3>
    <div class="menu">
      

<li>
    <a href="/articles/">
        Articles
    </a>
</li>

<li>
    <a href="/about-me/">
        About me
    </a>
</li>

<li>
    <a href="https://github.com/dennis-gerike/flickr-photos-to-postcard-converter">
        Demo Project
    </a>
</li>

<li>
    <a href="/contact/">
        Contact
    </a>
</li>

    </div>
  </div>

  <div class="socials">
      
  
    <a href="https://github.com/dennis-gerike" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.linkedin.com/in/dennis-gerike/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M106.786 0H8.189C3.67 0 0 3.722 0 8.291v98.418C0 111.278 3.67 115 8.189 115h98.597c4.518 0 8.214-3.722 8.214-8.291V8.29C115 3.722 111.304 0 106.786 0zm-72.03 98.571H17.713V43.69h17.07V98.57h-.025zm-8.522-62.377c-5.467 0-9.882-4.44-9.882-9.883 0-5.442 4.415-9.882 9.882-9.882 5.442 0 9.883 4.44 9.883 9.882a9.87 9.87 0 0 1-9.883 9.883zm72.414 62.377H81.604V71.875c0-6.366-.129-14.555-8.856-14.555-8.882 0-10.242 6.931-10.242 14.093V98.57H45.46V43.69h16.352v7.495h.23c2.285-4.312 7.855-8.856 16.147-8.856 17.25 0 20.458 11.372 20.458 26.158V98.57z"/>
  
  </svg>
</div>
</a>
  

  </div>
</header>

<div class="mobile-header">
  <p> // - Dennis Gerike </p>
  <div class="hamburger">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
</div>

<div class="overlay-menu">
  <header>
    <div class="intro">
      <div class="logo-container">
        <a href="https://dennis-gerike.de/">
          <img src='https://dennis-gerike.de/images/dennis-gerike.jpg' alt="Dennis Gerike" class="rounded-logo">
        </a>
      </div>
      <h2>Dennis Gerike</h2>
      <h3>Engineering test automation solutions for the web - with Cypress, BDD and Jira/Xray</h3>
      <div class="menu">
        

<li>
    <a href="/articles/">
        Articles
    </a>
</li>

<li>
    <a href="/about-me/">
        About me
    </a>
</li>

<li>
    <a href="https://github.com/dennis-gerike/flickr-photos-to-postcard-converter">
        Demo Project
    </a>
</li>

<li>
    <a href="/contact/">
        Contact
    </a>
</li>

      </div>
    </div>

    <div class="socials">
        
  
    <a href="https://github.com/dennis-gerike" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M102.679 0H12.32C5.52 0 0 5.519 0 12.321v90.358C0 109.48 5.519 115 12.321 115h90.358c6.802 0 12.321-5.519 12.321-12.321V12.32C115 5.52 109.481 0 102.679 0zM71.182 98.494c-2.156.385-2.952-.95-2.952-2.053 0-1.386.051-8.471.051-14.195 0-4.005-1.335-6.546-2.9-7.881C74.878 73.313 84.89 72.003 84.89 55.6c0-4.671-1.669-7.007-4.39-10.01.436-1.105 1.9-5.648-.436-11.552-3.568-1.104-11.731 4.595-11.731 4.595-3.389-.95-7.06-1.438-10.679-1.438-3.62 0-7.29.488-10.679 1.438 0 0-8.163-5.699-11.73-4.595-2.337 5.878-.899 10.422-.437 11.551-2.72 3.004-4.004 5.34-4.004 10.011 0 16.326 9.574 17.712 19.072 18.765-1.232 1.104-2.336 3.003-2.72 5.724-2.44 1.104-8.677 3.004-12.4-3.568-2.335-4.056-6.545-4.39-6.545-4.39-4.159-.05-.282 2.619-.282 2.619 2.772 1.283 4.723 6.212 4.723 6.212 2.49 7.624 14.4 5.057 14.4 5.057 0 3.568.052 9.37.052 10.422 0 1.104-.77 2.438-2.952 2.053C27.21 92.821 15.35 76.701 15.35 57.86c0-23.564 18.02-41.456 41.585-41.456s42.663 17.892 42.663 41.456c.026 18.842-11.474 34.988-28.416 40.635zM46 82.81c-.488.103-.95-.102-1.001-.436-.051-.385.282-.719.77-.822.488-.05.95.154 1.001.488.077.334-.257.668-.77.77zm-2.439-.23c0 .333-.385.615-.898.615-.565.052-.95-.23-.95-.616 0-.333.385-.616.899-.616.487-.051.95.231.95.616zm-3.516-.283c-.103.334-.616.488-1.053.334-.488-.103-.821-.488-.719-.822.103-.334.617-.488 1.053-.385.513.154.847.54.719.873zm-3.158-1.386c-.23.282-.718.23-1.104-.154-.385-.334-.487-.822-.23-1.053.23-.282.718-.23 1.103.154.334.334.462.847.231 1.053zm-2.336-2.336c-.23.154-.667 0-.95-.385-.282-.385-.282-.822 0-1.001.283-.231.72-.052.95.333.283.385.283.847 0 1.053zm-1.668-2.49c-.231.23-.616.103-.899-.154-.282-.334-.333-.719-.102-.899.23-.23.616-.102.898.154.282.334.334.72.103.899zm-1.72-1.9c-.103.231-.436.283-.719.103-.334-.154-.488-.436-.385-.667.103-.154.385-.231.719-.103.334.18.488.462.385.667z"/>
  
  </svg>
</div>
</a>
  

  
    <a href="https://www.linkedin.com/in/dennis-gerike/" class="social-link" target="_blank" rel="noopener" ><div class="icon">
  <svg width="35px" height="35px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M106.786 0H8.189C3.67 0 0 3.722 0 8.291v98.418C0 111.278 3.67 115 8.189 115h98.597c4.518 0 8.214-3.722 8.214-8.291V8.29C115 3.722 111.304 0 106.786 0zm-72.03 98.571H17.713V43.69h17.07V98.57h-.025zm-8.522-62.377c-5.467 0-9.882-4.44-9.882-9.883 0-5.442 4.415-9.882 9.882-9.882 5.442 0 9.883 4.44 9.883 9.882a9.87 9.87 0 0 1-9.883 9.883zm72.414 62.377H81.604V71.875c0-6.366-.129-14.555-8.856-14.555-8.882 0-10.242 6.931-10.242 14.093V98.57H45.46V43.69h16.352v7.495h.23c2.285-4.312 7.855-8.856 16.147-8.856 17.25 0 20.458 11.372 20.458 26.158V98.57z"/>
  
  </svg>
</div>
</a>
  

    </div>
  </header>
</div>

  <div class="content-wrapper">
    
    <main id="content" class="posts">

<h1>How to measure the test coverage of user stories in Jira?</h1>
<div class="article-meta-information">
  <div class="reading-time">
    <div class="icon">
  <svg width="26px" height="26px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M57.5 11C29.05 11 6 34.05 6 62.5S29.05 114 57.5 114 109 90.95 109 62.5 85.95 11 57.5 11zm0 93.032c-22.947 0-41.532-18.585-41.532-41.532 0-22.947 18.585-41.532 41.532-41.532 22.947 0 41.532 18.585 41.532 41.532 0 22.947-18.585 41.532-41.532 41.532zm12.833-21.68L52.703 69.54a2.508 2.508 0 0 1-1.018-2.015V33.427a2.5 2.5 0 0 1 2.492-2.492h6.646a2.5 2.5 0 0 1 2.492 2.492v29.426l13.871 10.092c1.122.81 1.35 2.368.54 3.49l-3.904 5.377a2.51 2.51 0 0 1-3.489.54z"/>
  
  </svg>
</div>

    <span>12 minutes</span>
  </div>

  <div class="published-date">
    <div class="icon">
  <svg width="26px" height="26px" viewBox="0 0 115 115" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
  
  <path d="M77.577 51.23a1.807 1.807 0 0 0-2.2.342l-27.562 27.79a1.807 1.807 0 0 1-2.2.342l-14.008-9.702a1.807 1.807 0 0 0-2.2.342l-1.952 1.968c-.287.22-.456.568-.455.936.001.37.172.716.46.934L45.637 86.77a1.807 1.807 0 0 0 2.2-.342l31.709-31.97c.287-.22.456-.567.455-.936a1.175 1.175 0 0 0-.46-.933l-1.963-1.36z"/><path d="M97.304 20H80.512c-.041.34-.063.683-.064 1.026a5.986 5.986 0 0 0 1.256 4.1c.054.003.103.02.157.025a4.881 4.881 0 0 1 1.865-.025c3.05.562 4.984 3.907 4.32 7.47-.666 3.563-3.678 5.996-6.728 5.433a4.932 4.932 0 0 1-2.437-1.258c-6.018-1.378-10.445-7.795-10.445-15.745 0-.347.023-.685.04-1.026H34.579c-.041.34-.063.683-.064 1.026a5.986 5.986 0 0 0 1.256 4.1c.054.003.103.02.157.025a4.881 4.881 0 0 1 1.865-.025c3.05.562 4.984 3.907 4.32 7.47-.666 3.563-3.678 5.996-6.728 5.433a4.932 4.932 0 0 1-2.437-1.258c-6.018-1.378-10.445-7.795-10.445-15.745 0-.22.019-.434.025-.652a9.788 9.788 0 0 0-5.697 4.471 9.683 9.683 0 0 0-2.65 4.764L1.158 92.871c-.965 4.689 2.6 8.503 7.948 8.503h6.334v2.673c-.077 5.41 4.263 9.861 9.705 9.953h72.16c5.438-.095 9.774-4.546 9.694-9.953V29.953c.08-5.407-4.256-9.858-9.695-9.953zM10.078 96.653c-2.378 0-3.964-1.697-3.535-3.782L16.637 43.84h80.787L87.331 92.871a5.254 5.254 0 0 1-5.091 3.782H10.078zm91.535 7.394c.036 2.403-1.891 4.382-4.308 4.424h-72.16c-2.42-.04-4.352-2.018-4.32-4.424v-2.673h60.443c5.348 0 10.484-3.814 11.449-8.503l8.897-43.215v54.391z"/><path d="M34.814 33c1.243 0 2.251-1.057 2.251-2.36 0-1.305-1.008-2.362-2.25-2.362-2.04 0-4.313-3.194-4.313-7.778s2.272-7.778 4.312-7.778c1.227 0 2.536 1.163 3.386 3.084H43C41.716 11.19 38.578 8 34.814 8 29.871 8 26 13.49 26 20.5c0 7.009 3.871 12.5 8.814 12.5z"/>
  
  </svg>
</div>

    <span>April 15, 2024</span>
  </div>
</div>

<p>Creating <strong>code coverage reports</strong> is easy these days.
For every major programming language there exist tools that can analyze which lines of code have been touched by the
unit tests – and which were not.
With the help of these reports it is easy to find gaps in the test coverage and to locate dead code.</p>
<p><img src="code-coverage-example.png" alt="Code Coverage Example"></p>
<p>Getting a <strong>feature coverage report</strong> is much harder.
A code coverage tool doesn&rsquo;t know anything about the features and how they are connected to the code or to the tests.
A project management tool on the other hand has all the information about the features, but has no clue about how they
are linked to the tests.</p>
<p><img src="test-vs-code-vs-feature.png" alt="Tests vs Code vs Feature"></p>
<p>In this article we will discover what is - in general - needed to generate such a feature coverage report.
And you will learn how it can be implemented in Jira, how to manage the user stories, requirements and acceptance tests,
how to come up with a useful coverage metric and how to actually visualize the numbers.</p>
<p>⚠️ To keep it simple I will use the words <strong>feature</strong> and <strong>user story</strong> interchangeably.
In reality, they describe different things.
A feature comes to life by implementing multiple user stories.
It is enclosed and consistent, while user stories might overlap, deprecate over time or even be in conflict with
each other.
In this article I will assume that one feature consists of exactly one user story and that both describe the same thing.
This simplification will not change the overall conclusion, but expect the implementation in the real world to be a bit
more complicated.
<strong>Hint:</strong> How do you identify a &ldquo;feature&rdquo; in Jira?
User stories are easy, but how does a feature materialize?
How can you select, filter or count features?</p>
<h2 id="who-reads-these-reports">Who reads these reports?</h2>
<p>When we look at the <em>code coverage</em>, then this report is only relevant for developers.
Stakeholders are normally not interested in the code or the unit tests or any code coverage metric.
They want to know that the requested feature has been implemented and that it has been tested and approved by &ldquo;their&rdquo;
people (PO, QA, BIZ or the stakeholder themself).
The devs on the other hand don&rsquo;t necessarily care about the <em>feature coverage</em>.
They are not even responsible for the overarching business tests,
see <a href="/articles/is-the-test-pyramid-compatible-with-bdd/2024/02/">Is the test pyramid compatible with BDD?</a>.</p>
<p>So, there is a clear separation between developer tests and business tests and their respective coverage reports.
This means, we can completely ignore the relationships between <em>feature</em>, <em>code</em> and <em>developer tests</em>.
Only the relationship between <em>feature</em> and <em>business test</em> is relevant for this discussion.</p>
<p><img src="business-tests-vs-developer-tests.png" alt="Business Tests vs Developer Tests"></p>
<h2 id="basic-requirements">Basic requirements</h2>
<p>No matter which tool(s) we want to use, for a working feature coverage solution we need to be able</p>
<ul>
<li>to create entities that can store the feature requests</li>
<li>to create entities that can store the acceptance tests</li>
<li>to connect a feature request with an acceptance test</li>
<li>to count the amount of feature requests</li>
<li>to count the amount of acceptance tests</li>
<li>to determine how many feature have (or don&rsquo;t have) tests connected to them.</li>
</ul>
<p>This is the absolute minimum.
We will later see that we should also add an entity type to represent the acceptance criteria.</p>
<h3 id="jira-integration">Jira integration</h3>
<p>When using <strong>Jira</strong> as the project management tool we can achieve the first three requirements quite easily.
We create a <em>user story</em> ticket for each feature request
(reminder: in this article we assume a feature to be the same as a story).
For the <em>acceptance tests</em> we can either create a custom ticket type on our own or install one of the many test
management plugins out there (Xray, Zephyr, Tricentis, etc.), which will do the heavy-lifting for us.
Linking two tickets together is a core feature of Jira.
So, connecting a <em>user story</em> ticket with a <em>test</em> ticket is also easy.</p>
<p>The counting part is a bit harder.
Jira search, Jira JQL and the Jira dashboards are mainly designed to show a list of tickets that satisfy a specific
filter query.
They are not meant to aggregate, calculate or output <em>numbers</em> in any way.
In order to achieve this we will need a few add-ons.</p>
<h4 id="jira-plugins">Jira Plugins</h4>
<p>In my experiments I have used three different Jira plugins (links can be found at the end of the article).
You can of course pick other alternatives for your project.
Depending on your Jira and project structure you might not even need all of them.</p>
<ul>
<li><strong>Xray</strong>: Test management tool from Xblend; adds the ticket type &ldquo;Test&rdquo; to Jira; can be used for manual and automated
tests</li>
<li><strong>ScriptRunner</strong>: Automation tool from Adaptavist; extends the Jira search to be able to search for parent and child
issues</li>
<li><strong>Gauge Gadget</strong>: Visualizer from Akeles; extends the Jira dashboard to show filter results as numbers and to combine
the results of two filters</li>
</ul>
<h2 id="a-simple-metric">A simple metric</h2>
<p>Now we can think about the metric.
What exactly do we want to count?
A code coverage report counts the number of lines that have been touched by at least one unit test.
Following this logic, for a feature coverage report we need to count the number of features/stories that are touched by
at least one acceptance test.
When we have this information we can calculate the percentage of covered (resp. not covered) features.</p>
<p>This is not yet the perfect metric, but it is a starting point.
It allows us, for example to implement a rule that prohibits a deployment when there exist stories which have no tests,
yet.
We can visualize this information for the whole team by creating a Jira dashboard.
The following JQL queries give you a hint how to create the filters you need for the dashboard widgets.
For your project you probably want to adjust them, so they ignore tickets that are not in the right status, or don&rsquo;t
have the correct label, or don&rsquo;t belong to the current sprint, etc.</p>
<p><em>Get all User Stories:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Story
</span></span></code></pre></div><p><em>Get all Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Test
</span></span></code></pre></div><p><em>Get all User Stories with Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Story
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> issueLinkType <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;is tested by&#34;</span>
</span></span></code></pre></div><p><em>Get all User Stories with missing Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Story 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> (issueLinkType <span style="color:#66d9ef">IS</span> EMPTY <span style="color:#66d9ef">OR</span> issueLinkType <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;is tested by&#34;</span>)
</span></span></code></pre></div><p>A resulting dashboard could then look something like that:</p>
<p><img src="jira-dashboard-simple-metric.png" alt="jira-dashboard-simple-metric.png"></p>
<h2 id="an-advanced-metric">An advanced metric</h2>
<p>From a stakeholder&rsquo;s perspective, having only one acceptance test per user story is not very reassuring.
We could make the rule stricter and enforce a specific amount of tests, e.g. <em>&ldquo;Each user story needs to have at least
five acceptance tests&rdquo;</em>.
But this approach will not work very well, because there are smaller and bigger stories, simpler and more complex ones.
In some cases five tests are not enough to cover every relevant aspect, and in other cases we have to &ldquo;invent&rdquo; test
cases, just to meet this arbitrary quota.</p>
<p>The underlying problem here is that we have no access to the list of acceptance criteria (AC).
The number of items on that list would be the best approximation for the real size of the user story.
But, very often these ACs are buried somewhere in the user story - either embedded in the description or in form of a
random bullet point list or table.
This makes it impossible to extract and evaluate the ACs automatically.</p>
<p>One way to solve this issue is to <strong>make the ACs first-class citizens</strong>.
Meaning, they become stand-alone tickets with their own ticket type.
By doing this, we are now able to attach the tests to the ACs and the ACs to the user story.
This creates a ticket chain which can be evaluated automatically.
Instead of guessing what a &ldquo;good&rdquo; number of acceptance tests could be we just count the ACs that are attached to the
user story.
Our deployment rule could now be something like: <em>&ldquo;Each user story needs to have at least one AC and each AC needs to
have at least one test.&rdquo;</em>
Or we can be stricter and demand each AC to have at least two tests - one for the happy and one for the unhappy path.</p>
<p>Depending on the project and the criticality of the application this might still not be the ideal solution, but it is a
huge improvement compared to the previous version.
Having for example a 90% test coverage here leads to a much higher confidence than having 90% in the simple metric.</p>
<h3 id="jira-integration-1">Jira integration</h3>
<h4 id="tickets-and-relationships">Tickets and relationships</h4>
<p>To store the acceptance criteria we need a dedicated ticket type.
One option is to re-designate the user story&rsquo;s &ldquo;sub-tasks&rdquo; to be ACs.
Using sub-tasks has the advantage that those tickets have a very high cohesion in Jira.
They cannot be (accidentally) disconnected from their parent ticket and they can only have exactly one parent.
This is perfect, because we definitely <strong>don&rsquo;t</strong> want to share ACs between multiple user stories.
They are supposed to be exclusive.</p>
<p>Depending on your project structure and/or project type this approach might not work for you.
For example, &ldquo;team-managed&rdquo; projects cannot have multiple sub-task types in Jira.
You would lose the option to create &ldquo;real&rdquo; sub-tasks.
An alternative option is to create a completely new issue type with a new link type.
You will have to give up the high cohesion, but the general concept is the same.</p>
<p>As described above, the acceptance tests have to be connected to the ACs and the ACs have to be connected to the user
story.
You can use the standard &ldquo;relates to&rdquo; relationship or create a custom one.</p>
<p>The following screenshots show how this ticket chain could look like in a real project.
(The ticket descriptions are truncated to keep the images as compact as possible.)</p>
<p><img src="user-story.png" alt="User Story">
<img src="acceptance-criterion.png" alt="Acceptance Criterion">
<img src="acceptance-test.png" alt="Acceptance Test"></p>
<h4 id="coverage-queries">Coverage queries</h4>
<p>The final step is to calculate and actually show the coverage numbers.
As discussed above we will make use of a few Jira plugins to achieve this.
When we created the queries for the simple metric we were able to use completely standard JQL commands.
But to analyze the ticket chain for the advanced metric we need the power of <strong>ScriptRunner</strong>.
We have to find and select child and parent tickets at the same time, which is not possible with standard JQL.</p>
<p>To keep the queries readable I strongly recommend to split them and save each sub-query in a separate filter.
The following examples show how this could look like.
The first three are for preparation and to collect partial results.
The last query combines them and determines how many user stories are actually covered by tests.
The first two queries can be created with default JQL.
The other two only work with ScriptRunner.</p>
<p><em>Get all Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;All Tests&#34;</span>
</span></span><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Test
</span></span></code></pre></div><p><em>Get all Acceptance Criteria:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;All ACs&#34;</span>
</span></span><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Acceptance Criteria&#34;</span>
</span></span></code></pre></div><p><em>Get all Acceptance Criteria that have at least one Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;ACs with Tests&#34;</span>
</span></span><span style="display:flex;"><span>issueFunction <span style="color:#66d9ef">in</span> linkedIssuesOf(filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All Tests&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All ACs&#34;</span>
</span></span></code></pre></div><p><em>Get all User Stories that have at least one AC, which have at least one Test:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;Covered Stories&#34;</span>
</span></span><span style="display:flex;"><span>issueFunction <span style="color:#66d9ef">in</span> parentsOf(filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ACs with Tests&#34;</span>)
</span></span></code></pre></div><p>To find the stories that are <strong>not</strong> covered by tests we need the following queries:</p>
<p><em>Get all User Stories:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;All Stories&#34;</span>
</span></span><span style="display:flex;"><span>project <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>PROJECT_KEY<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AND</span> issuetype <span style="color:#f92672">=</span> Story
</span></span></code></pre></div><p><em>Get all User Stories with missing ACs:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;Stories without ACs&#34;</span>
</span></span><span style="display:flex;"><span>issueFunction <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">in</span> parentsOf(filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All ACs&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All Stories&#34;</span>
</span></span></code></pre></div><p><em>Get all ACs with missing Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;ACs without Tests&#34;</span>
</span></span><span style="display:flex;"><span>issueFunction <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">in</span> linkedIssuesOf(filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All Tests&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;All ACs&#34;</span>
</span></span></code></pre></div><p><em>Get all User Stories that are missing ACs and/or Tests:</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#f92672">#</span> Filter name: <span style="color:#e6db74">&#34;Not-covered Stories&#34;</span>
</span></span><span style="display:flex;"><span>filter <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Stories without ACs&#34;</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">OR</span> issueFunction <span style="color:#66d9ef">in</span> parentsOf(<span style="color:#e6db74">&#34;filter = &#39;ACs without Tests&#39;&#34;</span>)
</span></span></code></pre></div><h4 id="dashboard-visualization">Dashboard visualization</h4>
<p>To show the coverage on the Jira dashboard we need a suitable widget.
At first glance the &ldquo;pie chart&rdquo; looks very promising.
It could spread the results into two segments, one for the user stories that are covered with tests and one for those
that are not.
Together, both segments would/should add up to 100%.
But the Jira pie chart can only operate on <strong>one</strong> input filter.
The segments are determined by grouping the results of this <strong>one</strong> filter by the wanted property (e.g. status or
assignee).
In order for this approach to work, each result item would need to carry a property that tells us the coverage status.
Creating such a query seems not to be possible in JQL.</p>
<p>When using to the Gauge widget from Akeles it gets easier.
This plugin expects <strong>two</strong> input filters - one to be able to determine the progress and one for the total number of
tickets.
In our case &ldquo;progress&rdquo; is the number of covered stories and &ldquo;total&rdquo; is the number of stories overall.</p>
<p>The following screenshot shows an example dashboard with three different metrics that are created this way.
In the left column we see the feature coverage.
In this case 67% of the user stories are covered with ACs, which in turn are also covered with tests.
The middle column shows how well the ACs themselves are covered with tests.
In this case 95% are covered, meaning that 5% of the ACs still need tests.
The right column tracks how many of the tests are specified.
In this case 95% are done, meaning that 5% of them are not fully specified yet.
The tables below each gauge show the &ldquo;opposite&rdquo; information in form of a ticket list.
They use the standard &ldquo;Filter Results&rdquo; widgets.</p>
<p><img src="jira-dashboard-advanced-metric.png" alt="Jira Dashboard"></p>
<h2 id="conclusion">Conclusion</h2>
<p>For greenfield projects it is relatively easy to implement the discussed Jira adjustments.
Integrating the changes into an existing project will be more challenging.
If you already have user stories and tests in Jira, then the biggest hurdle is to squeeze in the acceptance criteria
between user story and test.
But, as outlined in the article you can start small, with a simple metric.
Connecting stories with tests properly and having a Jira filter that can tell you which stories have no tests yet is
already a big improvement.
This solution can be implemented with standard Jira tools and does not need any 3rd-party plugins.</p>
<p>In the end, the primary goal of these reports is to increase the stakeholder&rsquo;s confidence in the product.
For the developers these coverage reports might be interesting, but not necessary.
For a tester the coverage numbers are less relevant than the test executions itself.
But for a stakeholder this is valuable information.
They are the farthest away from the actual development of a feature.
They have to &ldquo;believe&rdquo; the devs and testers when they say <em>&ldquo;Everything works&rdquo;</em> and <em>&ldquo;Everything is tested&rdquo;</em>.
With the coverage numbers (and ideally a proper test execution report) they have some hard facts that can significantly
help with the decision to go live or to request more tests first.</p>
<h2 id="links">Links</h2>
<ul>
<li>List of Test Management Tools for Jira: <a href="https://marketplace.atlassian.com/search?query=test%20management">https://marketplace.atlassian.com/search?query=test%20management</a></li>
<li>Xray for Jira: <a href="https://marketplace.atlassian.com/apps/1211769/xray-test-management-for-jira?hosting=cloud&amp;tab=overview">https://marketplace.atlassian.com/apps/1211769/xray-test-management-for-jira?hosting=cloud&amp;tab=overview</a></li>
<li>ScriptRunner for Jira: <a href="https://marketplace.atlassian.com/apps/6820/scriptrunner-for-jira?tab=overview&amp;hosting=cloud">https://marketplace.atlassian.com/apps/6820/scriptrunner-for-jira?tab=overview&amp;hosting=cloud</a></li>
<li>Gauge Gadget: <a href="https://marketplace.atlassian.com/apps/1211976/gauge-gadget?hosting=datacenter&amp;tab=overview">https://marketplace.atlassian.com/apps/1211976/gauge-gadget?hosting=datacenter&amp;tab=overview</a></li>
</ul>

    </main>
  </div>
  <footer>
    <div class="footer-wrapper">
      Powered by <a href="https://gohugo.io/" target="_blank" rel="external">Hugo</a>,
      using the <a href="https://github.com/bjacquemet/personal-web" target='_blank' rel="external">Personal Web</a> theme.
      Icons come from the <a href="https://fontawesome.com/license" target="_blank" rel="external">Font Awesome</a> library.
      Background <a href="https://flickr.com/photos/lawrenceyeah/9659161869" target='_blank' rel="external">image</a> by Lawrence Wang /
      <a href="https://creativecommons.org/licenses/by/2.0/" target='_blank' rel="external">CC BY 2.0</a>.
    </div>
  </footer>
  <script>
    document.querySelector('.mobile-header').addEventListener('click', function () {
      var om = document.querySelector(".overlay-menu");
      if (document.querySelector('.hamburger').classList.contains("cross")) {
        document.querySelector('.hamburger').classList.remove("cross");
        om.style.display = "none";
        om.style.width = "0%";
        om.style.height = "0%";
      }
      else {
        document.querySelector('.hamburger').classList.add("cross");
        om.style.width = "100%";
        om.style.height = "100vh";
        om.style.display = "block";
      }
    });
  </script>
</body>
</html>
